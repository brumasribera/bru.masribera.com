var b=(a,h,o)=>new Promise((m,f)=>{var g=n=>{try{r(o.next(n))}catch(l){f(l)}},u=n=>{try{r(o.throw(n))}catch(l){f(l)}},r=n=>n.done?m(n.value):Promise.resolve(n.value).then(g,u);r((o=o.apply(a,h)).next())});import{r as c,j as i}from"./index-BqeBxxRn.js";const w={start:"/timer-sounds/start-gong.mp3",middle:"/timer-sounds/middle-gong.mp3",minute:"/timer-sounds/1m-gong.mp3",end:"/timer-sounds/end-gong.mp3"};function L(){const[a,h]=c.useState(480),[o,m]=c.useState(!1),[f,g]=c.useState(!1),u=c.useRef(null),r=c.useRef({});c.useEffect(()=>{let t=!0;return b(this,null,function*(){for(const[s,p]of Object.entries(w)){if(!t)break;try{if(!(yield fetch(p)).ok)continue;if(!t)break;const d=new Audio(p);d.preload="auto",d.volume=1,r.current[s]=d,d.addEventListener("error",()=>{}),d.addEventListener("canplaythrough",()=>{}),d.addEventListener("pause",()=>{}),d.addEventListener("play",()=>{})}catch(E){}}}),()=>{t=!1,Object.values(r.current).forEach(s=>{s.pause(),s.src=""}),r.current={}}},[]);const n=c.useCallback(()=>{!r.current||Object.keys(r.current).length===0||Object.entries(r.current).forEach(([t,e])=>{e.paused&&e.currentTime>0&&e.currentTime<e.duration&&e.play().catch(()=>{})})},[]);c.useEffect(()=>{const t=()=>{n()},e=()=>{document.hidden||n()};return window.addEventListener("focus",t),document.addEventListener("visibilitychange",e),()=>{window.removeEventListener("focus",t),document.removeEventListener("visibilitychange",e)}},[n]);const l=t=>{const e=r.current[t];if(e)try{e.currentTime=0,e.volume=1;const s=e.play();s!==void 0&&s.catch(p=>{})}catch(s){}};c.useEffect(()=>(o&&a>0?u.current=setInterval(()=>{h(t=>{const e=t-1;return e>0&&e%60===0&&l("minute"),e===4*60&&l("middle"),e})},1e3):a===0&&!f&&(g(!0),m(!1),l("end")),()=>{u.current&&clearInterval(u.current)}),[o,a,f]);const x=()=>{a!==0&&(m(!0),g(!1),a===8*60&&l("start"))},y=()=>{m(!1),u.current&&clearInterval(u.current)},v=()=>{y(),h(8*60),g(!1),m(!1)},j=t=>{const e=Math.floor(t/60),s=t%60;return`${e.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`};return i.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-8xl font-light text-gray-300 mb-8 font-mono tracking-wider",children:j(a)}),i.jsxs("div",{className:"flex gap-6 justify-center",children:[!o&&a>0&&!f&&i.jsx("button",{onClick:x,className:"w-16 h-16 bg-gray-700 text-gray-200 rounded-full font-medium hover:bg-gray-600 transition-all duration-200 flex items-center justify-center",title:"Start",children:i.jsx("div",{className:"w-0 h-0 border-l-[16px] border-l-gray-200 border-t-[10px] border-t-transparent border-b-[10px] border-b-transparent ml-1"})}),o&&i.jsxs("button",{onClick:y,className:"w-16 h-16 bg-gray-700 text-gray-200 rounded-full font-medium hover:bg-gray-600 transition-all duration-200 flex items-center justify-center gap-1",title:"Pause",children:[i.jsx("div",{className:"w-1.5 h-6 bg-gray-200 rounded-sm"}),i.jsx("div",{className:"w-1.5 h-6 bg-gray-200 rounded-sm"})]}),i.jsx("button",{onClick:v,className:"w-16 h-16 bg-gray-800 text-gray-200 rounded-full font-medium hover:bg-gray-700 transition-all duration-200 flex items-center justify-center text-3xl",title:"Reset",children:"â†º"})]})]})})}export{L as TimerPage};
