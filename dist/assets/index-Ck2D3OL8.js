var y=(a,p,l)=>new Promise((u,x)=>{var h=i=>{try{o(l.next(i))}catch(d){x(d)}},f=i=>{try{o(l.throw(i))}catch(d){x(d)}},o=i=>i.done?u(i.value):Promise.resolve(i.value).then(h,f);o((l=l.apply(a,p)).next())});import{r as s,j as r}from"./index-YtD9MeIS.js";const k={start:"/timer-sounds/start-gong.mp3",middle:"/timer-sounds/middle-gong.mp3",minute:"/timer-sounds/1m-gong.mp3",end:"/timer-sounds/end-gong.mp3"};function C(){const[a,p]=s.useState(480),[l,u]=s.useState(!1),[x,h]=s.useState(!1),f=s.useRef(null),o=s.useRef(null),i=s.useRef({}),d=s.useRef(!1),b=s.useRef({});s.useEffect(()=>{document.title="Stretch Timer",setTimeout(()=>{document.title="Stretch Timer"},100);const t=document.querySelector('link[rel="manifest"]');if(t)t.href="/tools/timer/manifest.webmanifest";else{const e=document.createElement("link");e.rel="manifest",e.href="/tools/timer/manifest.webmanifest",document.head.appendChild(e)}const n=document.querySelector('link[rel="icon"]');if(n)n.href="/favicons/favicon-timer.svg";else{const e=document.createElement("link");e.rel="icon",e.href="/favicons/favicon-timer.svg",document.head.appendChild(e)}return()=>{const e=document.querySelector('link[rel="manifest"]');e&&(e.href="/site.webmanifest");const m=document.querySelector('link[rel="icon"]');m&&(m.href="/favicon.ico")}},[]),s.useEffect(()=>(Object.entries(k).forEach(([t,n])=>{const e=new Audio(n);e.preload="auto",e.load(),i.current[t]=e}),()=>{Object.values(i.current).forEach(t=>{t.pause(),t.src=""})}),[]);const v=s.useCallback(t=>y(this,null,function*(){const n=i.current[t];if(n)try{const e=document.querySelectorAll("audio, video");d.current=!1,e.forEach(c=>{c!==n&&!c.paused&&(d.current=!0,b.current[c.src||c.currentSrc]={currentTime:c.currentTime,volume:c.volume,playbackRate:c.playbackRate})}),n.currentTime=0,n.volume=.7;const m=n.play();m!==void 0&&(yield m.then(()=>{console.log(`${t} gong played successfully`)}).catch(c=>{console.log(`Audio play failed for ${t}:`,c),setTimeout(()=>{try{n.play()}catch(S){}},100)}))}catch(e){}}),[]);s.useEffect(()=>(l&&a>0&&f.current&&(o.current=setInterval(()=>{const t=Date.now(),n=Math.floor((t-f.current)/1e3),e=Math.max(0,8*60-n);e!==a&&(e>0&&e%60===0&&e!==8*60&&v("minute"),e===4*60&&v("middle")),p(e),e===0&&(h(!0),u(!1),v("end"))},100)),()=>{o.current&&clearInterval(o.current)}),[l,a,v]);const j=()=>{a!==0&&(f.current=Date.now(),u(!0),h(!1),a===8*60&&v("start"))},g=()=>{u(!1),o.current&&clearInterval(o.current)},w=()=>{g(),p(8*60),h(!1),u(!1),f.current=null},R=t=>{const n=Math.floor(t/60),e=t%60;return`${n.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`};return r.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-8xl font-light text-gray-300 mb-8 font-mono tracking-wider",children:R(a)}),r.jsxs("div",{className:"flex gap-4 justify-center",children:[l?r.jsx("button",{onClick:g,className:`bg-gray-700 hover:bg-gray-600 text-white px-8 py-4 rounded-full text-lg font-medium transition-colors\r
                         flex items-center justify-center w-20 h-20`,style:{zIndex:10},children:r.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})}):r.jsx("button",{onClick:j,disabled:a===0,className:`bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800 disabled:opacity-50 \r
                         text-white px-8 py-4 rounded-full text-lg font-medium transition-colors\r
                         flex items-center justify-center w-20 h-20`,style:{zIndex:10},children:r.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),r.jsx("button",{onClick:w,className:`bg-gray-700 hover:bg-gray-600 text-white px-8 py-4 rounded-full text-lg font-medium transition-colors\r
                       flex items-center justify-center w-20 h-20`,style:{zIndex:10},children:r.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})})})]}),x&&r.jsx("div",{className:"mt-8 text-2xl text-green-400 font-medium",children:"Time's up! Great job stretching! ðŸŽ‰"})]})})}export{C as TimerPage};
