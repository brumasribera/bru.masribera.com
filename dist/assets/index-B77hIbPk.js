var M=Object.defineProperty;var x=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var w=(e,r,n)=>r in e?M(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,y=(e,r)=>{for(var n in r||(r={}))R.call(r,n)&&w(e,n,r[n]);if(x)for(var n of x(r))_.call(r,n)&&w(e,n,r[n]);return e};var j=(e,r,n)=>new Promise((p,c)=>{var i=a=>{try{s(n.next(a))}catch(g){c(g)}},o=a=>{try{s(n.throw(a))}catch(g){c(g)}},s=a=>a.done?p(a.value):Promise.resolve(a.value).then(i,o);s((n=n.apply(e,r)).next())});import{r as m,j as u}from"./index-C-YL-MYp.js";function L(e={}){m.useEffect(()=>{const r=window.location.pathname,n=()=>({name:e.name||`${document.title||"App"} - Bru Mas Ribera`,short_name:e.short_name||document.title||"App",description:e.description||"A page from Bru Mas Ribera's portfolio",start_url:e.start_url||r,display:e.display||"standalone",background_color:e.background_color||"#ffffff",theme_color:e.theme_color||"#3b82f6",orientation:e.orientation||"portrait-primary",scope:e.scope||r,lang:"en",categories:e.categories||["productivity","utilities"],prefer_related_applications:!1,related_applications:[],icons:[{src:"/favicon-16x16.png",sizes:"16x16",type:"image/png"},{src:"/favicon-32x32.png",sizes:"32x32",type:"image/png"},{src:"/apple-touch-icon.png",sizes:"180x180",type:"image/png"},{src:"/favicon-32x32.png",sizes:"192x192",type:"image/png"},{src:"/apple-touch-icon.png",sizes:"512x512",type:"image/png"}]}),p=()=>{const i=document.querySelector("link[rel='manifest']");if(i){const o=JSON.stringify(n(),null,2),s=new Blob([o],{type:"application/json"}),a=URL.createObjectURL(s);i.href=a}},c=()=>{[{name:"mobile-web-app-capable",content:"yes"},{name:"apple-mobile-web-app-capable",content:"yes"},{name:"apple-mobile-web-app-status-bar-style",content:"default"},{name:"apple-mobile-web-app-title",content:document.title||"App"},{name:"application-name",content:document.title||"App"},{name:"msapplication-TileColor",content:e.theme_color||"#3b82f6"},{name:"msapplication-config",content:"/browserconfig.xml"}].forEach(o=>{if(!document.querySelector(`meta[name="${o.name}"]`)){const a=document.createElement("meta");a.name=o.name,a.content=o.content,document.head.appendChild(a)}})};return p(),c(),()=>{const i=document.querySelector("link[rel='manifest']");i&&i.href.startsWith("blob:")&&(URL.revokeObjectURL(i.href),i.href="/site.webmanifest"),["mobile-web-app-capable","apple-mobile-web-app-capable","apple-mobile-web-app-status-bar-style","apple-mobile-web-app-title","application-name","msapplication-TileColor","msapplication-config"].forEach(s=>{const a=document.querySelector(`meta[name="${s}"]`);a&&a.remove()})}},[e])}function A(e,r={}){return function(p){const c=window.location.pathname,i=y({start_url:c,scope:c,display:"standalone",theme_color:"#3b82f6",background_color:"#ffffff",orientation:"portrait-primary",categories:["productivity","utilities"]},r);return L(i),u.jsx(e,y({},p))}}const C={start:"/timer-sounds/start-gong.mp3",middle:"/timer-sounds/middle-gong.mp3",minute:"/timer-sounds/1m-gong.mp3",end:"/timer-sounds/end-gong.mp3"};function N(){const[e,r]=m.useState(480),[n,p]=m.useState(!1),[c,i]=m.useState(!1),o=m.useRef(null),s=m.useRef({});m.useEffect(()=>{document.title="Timer"},[]),m.useEffect(()=>{(()=>{const f=document.querySelector("link[rel*='icon']");if(f)f.href="/favicons/favicon-timer.svg";else{const d=document.createElement("link");d.type="image/svg+xml",d.rel="icon",d.href="/favicons/favicon-timer.svg",document.head.appendChild(d)}})();let t=!0;return j(this,null,function*(){for(const[f,d]of Object.entries(C)){if(!t)break;try{if(!(yield fetch(d)).ok)continue;if(!t)break;const b=new Audio(d);b.preload="auto",b.volume=1,s.current[f]=b,b.addEventListener("error",()=>{}),b.addEventListener("canplaythrough",()=>{}),b.addEventListener("pause",()=>{}),b.addEventListener("play",()=>{})}catch(S){}}}),()=>{t=!1;const f=document.querySelector("link[rel*='icon']");f&&f.href.includes("favicon-timer")&&(f.href="/favicon.ico"),Object.values(s.current).forEach(d=>{d.pause(),d.src=""}),s.current={}}},[]);const a=m.useCallback(()=>{!s.current||Object.keys(s.current).length===0||Object.entries(s.current).forEach(([l,t])=>{t.paused&&t.currentTime>0&&t.currentTime<t.duration&&t.play().catch(()=>{})})},[]);m.useEffect(()=>{const l=()=>{a()},t=()=>{document.hidden||a()};return window.addEventListener("focus",l),document.addEventListener("visibilitychange",t),()=>{window.removeEventListener("focus",l),document.removeEventListener("visibilitychange",t)}},[a]);const g=l=>{const t=s.current[l];if(t)try{t.currentTime=0,t.volume=1;const h=t.play();h!==void 0&&h.catch(f=>{})}catch(h){}};m.useEffect(()=>(n&&e>0?o.current=setInterval(()=>{r(l=>{const t=l-1;return t>0&&t%60===0&&g("minute"),t===4*60&&g("middle"),t})},1e3):e===0&&!c&&(i(!0),p(!1),g("end")),()=>{o.current&&clearInterval(o.current)}),[n,e,c]);const k=()=>{e!==0&&(p(!0),i(!1),e===8*60&&g("start"))},v=()=>{p(!1),o.current&&clearInterval(o.current)},T=()=>{v(),r(8*60),i(!1),p(!1)},E=l=>{const t=Math.floor(l/60),h=l%60;return`${t.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}`};return u.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-8xl font-light text-gray-300 mb-8 font-mono tracking-wider",children:E(e)}),u.jsxs("div",{className:"flex gap-6 justify-center",children:[!n&&e>0&&!c&&u.jsx("button",{onClick:k,className:"w-16 h-16 bg-gray-700 text-gray-200 rounded-full font-medium hover:bg-gray-600 transition-all duration-200 flex items-center justify-center",title:"Start",children:u.jsx("div",{className:"w-0 h-0 border-l-[16px] border-l-gray-200 border-t-[10px] border-t-transparent border-b-[10px] border-b-transparent ml-1"})}),n&&u.jsxs("button",{onClick:v,className:"w-16 h-16 bg-gray-700 text-gray-200 rounded-full font-medium hover:bg-gray-600 transition-all duration-200 flex items-center justify-center gap-1",title:"Pause",children:[u.jsx("div",{className:"w-1.5 h-6 bg-gray-200 rounded-sm"}),u.jsx("div",{className:"w-1.5 h-6 bg-gray-200 rounded-sm"})]}),u.jsx("button",{onClick:T,className:"w-16 h-16 bg-gray-800 text-gray-200 rounded-full font-medium hover:bg-gray-700 transition-all duration-200 flex items-center justify-center text-3xl",title:"Reset",children:"â†º"})]})]})})}const q=A(N,{name:"Timer - Bru Mas Ribera",short_name:"Timer",description:"A simple and elegant timer app",categories:["productivity","utilities"]});export{q as TimerPage};
