var x=(a,p,c)=>new Promise((f,g)=>{var v=r=>{try{t(c.next(r))}catch(u){g(u)}},d=r=>{try{t(c.throw(r))}catch(u){g(u)}},t=r=>r.done?f(r.value):Promise.resolve(r.value).then(v,d);t((c=c.apply(a,p)).next())});import{r as i,j as o}from"./index-CQuXhGqw.js";const w={start:"/timer-sounds/start-gong.mp3",middle:"/timer-sounds/middle-gong.mp3",minute:"/timer-sounds/1m-gong.mp3",end:"/timer-sounds/end-gong.mp3"};function N(){const[a,p]=i.useState(480),[c,f]=i.useState(!1),[g,v]=i.useState(!1),d=i.useRef(null),t=i.useRef({});i.useEffect(()=>{document.title="Timer"},[]),i.useEffect(()=>{(()=>{const l=document.querySelector("link[rel*='icon']");if(l)l.href="/favicons/favicon-timer.svg";else{const s=document.createElement("link");s.type="image/svg+xml",s.rel="icon",s.href="/favicons/favicon-timer.svg",document.head.appendChild(s)}})();let e=!0;return x(this,null,function*(){for(const[l,s]of Object.entries(w)){if(!e)break;try{if(!(yield fetch(s)).ok)continue;if(!e)break;const m=new Audio(s);m.preload="auto",m.volume=1,t.current[l]=m,m.addEventListener("error",()=>{}),m.addEventListener("canplaythrough",()=>{}),m.addEventListener("pause",()=>{}),m.addEventListener("play",()=>{})}catch(E){}}}),()=>{e=!1;const l=document.querySelector("link[rel*='icon']");l&&l.href.includes("favicon-timer")&&(l.href="/favicon.ico"),Object.values(t.current).forEach(s=>{s.pause(),s.src=""}),t.current={}}},[]);const r=i.useCallback(()=>{!t.current||Object.keys(t.current).length===0||Object.entries(t.current).forEach(([n,e])=>{e.paused&&e.currentTime>0&&e.currentTime<e.duration&&e.play().catch(()=>{})})},[]);i.useEffect(()=>{const n=()=>{r()},e=()=>{document.hidden||r()};return window.addEventListener("focus",n),document.addEventListener("visibilitychange",e),()=>{window.removeEventListener("focus",n),document.removeEventListener("visibilitychange",e)}},[r]);const u=n=>{const e=t.current[n];if(e)try{e.currentTime=0,e.volume=1;const h=e.play();h!==void 0&&h.catch(l=>{})}catch(h){}};i.useEffect(()=>(c&&a>0?d.current=setInterval(()=>{p(n=>{const e=n-1;return e>0&&e%60===0&&u("minute"),e===4*60&&u("middle"),e})},1e3):a===0&&!g&&(v(!0),f(!1),u("end")),()=>{d.current&&clearInterval(d.current)}),[c,a,g]);const b=()=>{a!==0&&(f(!0),v(!1),a===8*60&&u("start"))},y=()=>{f(!1),d.current&&clearInterval(d.current)},j=()=>{y(),p(8*60),v(!1),f(!1)},k=n=>{const e=Math.floor(n/60),h=n%60;return`${e.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}`};return o.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-8xl font-light text-gray-300 mb-8 font-mono tracking-wider",children:k(a)}),o.jsxs("div",{className:"flex gap-6 justify-center",children:[!c&&a>0&&!g&&o.jsx("button",{onClick:b,className:"w-16 h-16 bg-gray-700 text-gray-200 rounded-full font-medium hover:bg-gray-600 transition-all duration-200 flex items-center justify-center",title:"Start",children:o.jsx("div",{className:"w-0 h-0 border-l-[16px] border-l-gray-200 border-t-[10px] border-t-transparent border-b-[10px] border-b-transparent ml-1"})}),c&&o.jsxs("button",{onClick:y,className:"w-16 h-16 bg-gray-700 text-gray-200 rounded-full font-medium hover:bg-gray-600 transition-all duration-200 flex items-center justify-center gap-1",title:"Pause",children:[o.jsx("div",{className:"w-1.5 h-6 bg-gray-200 rounded-sm"}),o.jsx("div",{className:"w-1.5 h-6 bg-gray-200 rounded-sm"})]}),o.jsx("button",{onClick:j,className:"w-16 h-16 bg-gray-800 text-gray-200 rounded-full font-medium hover:bg-gray-700 transition-all duration-200 flex items-center justify-center text-3xl",title:"Reset",children:"â†º"})]})]})})}export{N as TimerPage};
