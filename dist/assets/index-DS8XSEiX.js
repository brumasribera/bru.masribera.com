import{r,j as n}from"./index-DWGrS7P7.js";const I={minute:"/timer-sounds/1m-gong.mp3",middle:"/timer-sounds/middle-gong.mp3",end:"/timer-sounds/end-gong.mp3"},x=[{bg:"bg-blue-600",border:"border-blue-400",text:"text-white"},{bg:"bg-green-600",border:"border-green-400",text:"text-white"},{bg:"bg-purple-600",border:"border-purple-400",text:"text-white"},{bg:"bg-orange-600",border:"border-orange-400",text:"text-white"},{bg:"bg-pink-600",border:"border-pink-400",text:"text-white"},{bg:"bg-indigo-600",border:"border-indigo-400",text:"text-white"},{bg:"bg-teal-600",border:"border-teal-400",text:"text-white"},{bg:"bg-red-600",border:"border-red-400",text:"text-white"},{bg:"bg-yellow-600",border:"border-yellow-400",text:"text-black"},{bg:"bg-cyan-600",border:"border-cyan-400",text:"text-white"},{bg:"bg-emerald-600",border:"border-emerald-400",text:"text-white"},{bg:"bg-rose-600",border:"border-rose-400",text:"text-white"},{bg:"bg-violet-600",border:"border-violet-400",text:"text-white"},{bg:"bg-amber-600",border:"border-amber-400",text:"text-black"},{bg:"bg-lime-600",border:"border-lime-400",text:"text-black"},{bg:"bg-sky-600",border:"border-sky-400",text:"text-white"}];function E(){const[l,f]=r.useState(480),[c,u]=r.useState(!1),[p,g]=r.useState(!1),[d,w]=r.useState("v1.1.3"),[v,y]=r.useState("2025-08-27 11:45:00"),a=r.useRef(null),o=r.useRef(null),s=r.useRef(null),m=r.useCallback(t=>{const e=t.match(/v?(\d+)\.(\d+)\.(\d+)/);if(!e)return x[0];const i=parseInt(e[1]),S=parseInt(e[2]),k=parseInt(e[3]),T=(i*1e4+S*100+k)%x.length;return x[T]},[]),b=r.useCallback(t=>{const e=new Audio(I[t]);e.volume=.6,e.play().catch(i=>{console.warn(`Could not play gong ${t}:`,i)})},[]);r.useEffect(()=>{fetch(`/VERSION.json?v=${Date.now()}`).then(t=>t.json()).then(t=>{w(`v${t.version}`),y(t.timestamp)}).catch(t=>{console.warn("Failed to load version info:",t)})},[]),r.useEffect(()=>{if(c&&l>0)return a.current||(a.current=Date.now()),o.current=setInterval(()=>{const t=Math.floor((Date.now()-a.current)/1e3),e=Math.max(0,8*60-t);f(e),e>0&&e%60===0&&s.current!==e&&(b("minute"),s.current=e),e===4*60&&s.current!==e&&(b("middle"),s.current=e),e===0&&s.current!==e&&(b("end"),s.current=e,g(!0),u(!1),a.current=null)},100),()=>{o.current&&clearInterval(o.current)};o.current&&(clearInterval(o.current),o.current=null)},[c,l,b]),r.useEffect(()=>(document.title="Stretch Timer",()=>{document.title="Bru Mas Ribera - Frontend & UX Engineer"}),[]);const j=()=>{l!==0&&(u(!0),g(!1),a.current=Date.now(),s.current=null)},h=()=>{u(!1),o.current&&(clearInterval(o.current),o.current=null)},N=()=>{h(),f(8*60),g(!1),a.current=null,s.current=null},R=t=>{const e=Math.floor(t/60),i=t%60;return`${e.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`};return n.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-8xl font-light text-gray-300 mb-8 font-mono tracking-wider",children:R(l)}),n.jsxs("div",{className:"flex gap-6 justify-center",children:[!c&&l>0&&!p&&n.jsx("button",{onClick:j,className:"w-16 h-16 bg-gray-700 text-gray-200 rounded-full font-medium hover:bg-gray-600 transition-all duration-200 flex items-center justify-center",title:"Start",children:n.jsx("div",{className:"w-0 h-0 border-l-[16px] border-l-gray-200 border-t-[10px] border-t-transparent border-b-[10px] border-b-transparent ml-1"})}),c&&n.jsxs("button",{onClick:h,className:"w-16 h-16 bg-gray-700 text-gray-200 rounded-full font-medium hover:bg-gray-600 transition-all duration-200 flex items-center justify-center gap-1",title:"Pause",children:[n.jsx("div",{className:"w-1.5 h-6 bg-gray-200 rounded-sm"}),n.jsx("div",{className:"w-1.5 h-6 bg-gray-200 rounded-sm"})]}),n.jsx("button",{onClick:N,className:"w-16 h-16 bg-gray-800 text-gray-200 rounded-full font-medium hover:bg-gray-700 transition-all duration-200 flex items-center justify-center text-3xl",title:"Reset",children:"â†º"})]}),n.jsx("div",{className:"mt-6 text-center",children:n.jsxs("span",{className:`inline-block ${m(d).bg} ${m(d).text} text-sm px-4 py-2 rounded-lg font-mono border-2 ${m(d).border} shadow-lg`,children:["ðŸš€ ",d," â€¢ ",v]})})]})})}export{E as TimerPage};
